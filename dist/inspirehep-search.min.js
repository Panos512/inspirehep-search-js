/*
 * This file is part of INSPIRE.
 * Copyright (C) 2016 CERN.
 *
 * INSPIRE is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * INSPIRE is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with INSPIRE; if not, write to the Free Software Foundation, Inc.,
 * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
 *
 * In applying this license, CERN does not
 * waive the privileges and immunities granted to it by virtue of its status
 * as an Intergovernmental Organization or submit itself to any jurisdiction.
 */
!function(e){e.module("inspirehepFacetsShowMore",["inspirehepFacetsShowMore.controllers"])}(angular),function(e){function r(e){e.decorator("invenioSearchAPI",["$delegate",function(e){var r=e.search;return e.search=function(e){return e.headers={Accept:"application/vnd+inspire.brief+json"},r(e)},e}])}r.$inject=["$provide"],e.module("inspirehepSearch.configuration",[]).config(r),e.module("inspirehepSearch",["invenioSearch","inspirehepFacetsShowMore","inspirehepSearch.filters","inspirehepSearch.configuration","ui.bootstrap","authors","inspirehepSearch.suggestions"])}(angular),function(e){e.module("authors",["ui.bootstrap","authors.directives","authors.controllers"])}(angular),function(e){e.module("inspirehepSearch.filters",["ngSanitize","inspirehepSearch.filters.abstract","inspirehepSearch.filters.authorInstitution","inspirehepSearch.filters.arxiv","inspirehepSearch.filters.arxivInfo","inspirehepSearch.filters.capitalize","inspirehepSearch.filters.collaboration","inspirehepSearch.filters.corporateAuthor","inspirehepSearch.filters.date","inspirehepSearch.filters.datePassedNow","inspirehepSearch.filters.doi","inspirehepSearch.filters.publicationInfo","inspirehepSearch.filters.publicationInfoDoi","inspirehepSearch.filters.reportNumber","inspirehepSearch.filters.title"])}(angular),function(e){function r(e){function r(){e.facetResults=e.facetResults+e.step}function n(r){var n=e.vm.invenioSearchResults.aggregations[r].buckets.length-e.facetResults;return n<e.step?n:e.step}function i(){e.facetResults=10}e.facetResults=10,e.step=10,e.calculateStep=n,e.moreFacetResults=r,e.$on("invenio.search.success",i)}r.$inject=["$scope"],e.module("inspirehepFacetsShowMore.controllers",[]).controller("FacetsShowMoreController",r)}(angular),function(e){e.module("inspirehepSearch.suggestions",[]).controller("toastrController",function(e){for(var r=0;r<e.vm.invenioSearchResults.warnings.length;r++)if(e.vm.invenioSearchResults.warnings[r].hasOwnProperty("query_suggestion")){e.suggestion_message=e.vm.invenioSearchResults.warnings[r].query_suggestion;break}})}(angular),function(e){function r(){function e(e,r){return r.template}return{restrict:"E",scope:!1,templateUrl:e}}e.module("inspirehepSearch.suggestions").directive("inspireSearchSuggestions",r)}(angular),function(e){function r(){function e(){var e=[];if(void 0!==i.authors){for(var r=0;r<i.authors.length;r++)i.authors[r].full_name&&e.push(n(i.authors[r]));return e}}function r(e){var r=e.split(","),n=r.reverse();return n.join(" ")}function n(e){var r={};return r.full_name=e.full_name,void 0!==e.affiliations&&e.affiliations.length>0&&(r.affiliation=e.affiliations[0].value),r}var i=this;i.getAuthors=e,i.splitAuthorName=r,i.renderAuthorNames=n}r.$inject=["$scope"],e.module("authors.controllers",[]).controller("authorCtrl",r)}(angular),function(e){function r(){function e(e,r,n,i){""!==n.authors&&(i.authors=JSON.parse(n.authors)),""!==n.collaboration&&(i.collaboration=JSON.parse(n.collaboration)),i.numberOfAuthors=parseInt(n.numberOfAuthors),i.controlNumber=parseInt(n.controlNumber),i.AUTHORS_LIMIT=10,i.authorsInfo=i.getAuthors()}function r(e,r){return r.authorsTemplate}return{templateUrl:r,restrict:"E",controller:"authorCtrl",controllerAs:"vm",scope:!0,link:e}}e.module("authors.directives",[]).directive("authorsAffiliation",r)}(angular),function(e){function r(){return function(e){function r(e){return n[e]||e}if(void 0!==e){for(var n={"&":"&amp;","<":"&lt;",">":"&gt;"},i="",t=0;t<e.length;t++)"arXiv"!==e[t].source&&void 0!==e[t].value?i=e[t].value:void 0!==e[t].value&&(i=e[t].value);return i.replace(/[&<>]/g,r)}}}e.module("inspirehepSearch.filters.abstract",[]).filter("abstract",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){for(var r="",n=0;n<e.length;n++){r=e[n].value;break}return r}}}e.module("inspirehepSearch.filters.arxiv",[]).filter("arxiv",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){for(var r="",n="",i=0;i<e.length;i++)r='e-Print: <a href="http://arxiv.org/abs/'+e[i].value+'" >'+e[i].value+"</a>",e[i].categories&&(n="["+e[i].categories[0]+"]");return r+" "+n}}}e.module("inspirehepSearch.filters.arxivInfo",[]).filter("arxivInfo",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){for(var r="",n=0;n<e.length;n++)if("undefined"!=typeof e[n].institution&&"undefined"!=typeof e[n].institution.name){if("undefined"!=typeof e[n].status&&"current"===e[n].status.toLowerCase())return"("+e[n].institution.name+")";r||(r=e[n].institution.name)}return r?"("+r+")":void 0}}}e.module("inspirehepSearch.filters.authorInstitution",[]).filter("authorInstitution",r)}(angular),function(e){function r(){return function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}}e.module("inspirehepSearch.filters.capitalize",[]).filter("capitalize",r)}(angular),function(e){function r(){return function(e,r){if(void 0!==e){var n=[],i="";if(!r)for(var t=0;t<e.length;t++)e[t].value&&n.push('<a href="/search?p=collaboration:'+e[t].value+'">'+e[t].value+"</a>");return 0!==n.length&&(i=n.join(" and ")+(n.length>1?" Collaborations":" Collaboration")),i}}}e.module("inspirehepSearch.filters.collaboration",[]).filter("collaboration",r)}(angular),function(e){function r(){return function(e,r){if(void 0!==e);else if(r)return r[0]}}e.module("inspirehepSearch.filters.corporateAuthor",[]).filter("corporateAuthor",r)}(angular),function(e){function r(){return function(e,r,n,i){return void 0===r&&void 0===n&&void 0===i?e:"- "+e}}e.module("inspirehepSearch.filters.date",[]).filter("date",r)}(angular),function(e){function r(){return function(e){var r=new Date,n=new Date(e);return n>=r}}e.module("inspirehepSearch.filters.datePassedNow",[]).filter("datePassedNow",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){for(var r=[],n=0;n<e.length;n++)e[n].value&&r.push('<a href="http://dx.doi.org/'+e[n].value+'" title="DOI" >'+e[n].value+"</a>");return 0!==r.length?"DOI: "+r.join(", "):""}}}e.module("inspirehepSearch.filters.doi",[]).filter("doi",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){var r="";return e.pub_info&&(r="Published in "+e.pub_info.join(" and ")),e.conf_info&&(r+=" "+e.conf_info),r}}}e.module("inspirehepSearch.filters.publicationInfo",[]).filter("publicationInfo",r)}(angular),function(e){function r(){return function(e,r){if(void 0!==e){var n="Published in ";return n+='<a href="http://dx.doi.org/'+e[0].value+'" title="DOI"><span class="text-left">'+r.pub_info[0]+"</span></a>",r.conf_info&&(n+=" "+r.conf_info),n}}}e.module("inspirehepSearch.filters.publicationInfoDoi",[]).filter("publicationInfoDoi",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){for(var r=[],n=0;n<e.length;n++)e[n].value&&r.push(" "+e[n].value);return 0!==r.length?"Report number: "+r:""}}}e.module("inspirehepSearch.filters.reportNumber",[]).filter("reportNumber",r)}(angular),function(e){function r(){return function(e){if(void 0!==e){var r="";return void 0!==e.title&&(r=e.title,void 0!==e.subtitle&&(r+=" : "+e.subtitle)),r}}}e.module("inspirehepSearch.filters.title",[]).filter("title",r)}(angular);